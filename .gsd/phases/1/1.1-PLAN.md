---
phase: 1
plan: 1
wave: 1
---

# Plan 1.1: Foundations and Docker

## Objective
Establish the backend structural skeleton (Node.js/Express with Vanilla JS) utilizing Clean Architecture and set up Docker (`docker-compose.yml`) for multiple environments (Development, Testing, Production).

## Context
- `.gsd/SPEC.md`
- `.gsd/DECISIONS.md`
- `.gsd/ROADMAP.md`

## Tasks

<task type="auto">
  <name>Initialize API Skeleton</name>
  <files>
    - api/package.json
    - api/.env.example
    - api/server.js
  </files>
  <action>
    - Initialize an npm project (`api/package.json`).
    - Install necessary foundational dependencies (express, cors, dotenv).
    - Create `api/.env.example` with the environment variables defined in SPEC (e.g., `PORT`, `DB_TYPE`, `DB_URI`, `JWT_SECRET`, etc.).
    - Create a minimal `api/server.js` that spins up an Express server using the `PORT` from environment configuration.
    - Set up the folder structure (`api/controllers`, `api/models`, `api/services`, `api/repositories`, `api/routes`).
  </action>
  <verify>cd api && npm install && npm start</verify>
  <done>Server starts on configured port without errors.</done>
</task>

<task type="auto">
  <name>Docker Infrastructure</name>
  <files>
    - docker-compose.yml
    - api/Dockerfile
  </files>
  <action>
    - Create an `api/Dockerfile` for the Node.js backend.
    - Create a root `docker-compose.yml` that configures three services: `api`, `mongodb`, and `postgres` (postgres is just a boilerplate container for now, active focus is MongoDB).
    - Ensure a volume is mapped for `/storage/postulantes` on the API container.
    - Map ports (e.g. 5000 for api).
  </action>
  <verify>docker-compose config</verify>
  <done>docker-compose config returns valid yaml configuration.</done>
</task>

## Success Criteria
- [ ] API folder structure is created.
- [ ] `api/server.js` exists and can spin up an express server.
- [ ] `docker-compose.yml` contains `api`, `mongodb`, and `postgres` configurations with proper volume mappings.
