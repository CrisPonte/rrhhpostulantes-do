---
phase: 5
plan: 1
wave: 1
---

# Plan 5.1: API Integration & Service Layer

## Objective
Establish the frontend service layer for Postulantes and Support entities (Portales, Puestos, Titulos) to enable data fetching and advanced search operations for the UI.

## Context
- `api/controllers/PostulanteController.js`
- `api/controllers/GenericController.js`
- `web/src/services/auth.service.js`

## Tasks

<task type="auto">
  <name>Support Data Services</name>
  <files>
    - web/src/services/support.service.js
  </files>
  <action>
    - Create `support.service.js`.
    - Implement methods to fetch arrays from `/api/portales`, `/api/puestos`, and `/api/titulos` using `axios` with the JWT token via `auth.service.getToken()`.
  </action>
  <verify>grep "getPortales" web/src/services/support.service.js</verify>
  <done>Support endpoints consumptions established.</done>
</task>

<task type="auto">
  <name>Postulante Service (CRUD & Files)</name>
  <files>
    - web/src/services/postulante.service.js
  </files>
  <action>
    - Ensure `getAll(filters)` can pass query parameters for advanced search.
    - Implement `getById(id)`.
    - Implement `create(data)`.
    - Implement `update(id, data)`.
    - Implement `remove(id)`.
    - Implement `uploadFile(id, file)` using `FormData` and `Content-Type: multipart/form-data`.
    - Implement `listFiles(id)`.
    - Implement a utility for generating the file download URL (e.g. `getDownloadUrl(id, filename)` appending token or letting it download explicitly via Blob). Note: Best to let `axios` download it as blob and trigger browser download.
  </action>
  <verify>grep "uploadFile" web/src/services/postulante.service.js</verify>
  <done>Postulante service layer handles all complex operations.</done>
</task>

## Success Criteria
- [ ] API calls are central and reusable.
- [ ] Authentication token propagates securely.
- [ ] File uploads and downloads are programmatically encapsulated.
